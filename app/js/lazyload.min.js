!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):(t="undefined"!=typeof globalThis?globalThis:t||self).LazyLoad=e()}(this,function(){"use strict";function e(){return(e=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n,a=arguments[e];for(n in a)Object.prototype.hasOwnProperty.call(a,n)&&(t[n]=a[n])}return t}).apply(this,arguments)}function r(t){return e({},et,t)}function t(t,e){var n,a="LazyLoad::Initialized",e=new t(e);try{n=new CustomEvent(a,{detail:{instance:e}})}catch(t){(n=document.createEvent("CustomEvent")).initCustomEvent(a,!1,!1,{instance:e})}window.dispatchEvent(n)}function c(t,e){return t.getAttribute(lt+e)}function u(t){return h(t)===rt}function d(t){return t.llTempImage}function j(t,e){t&&(t.toLoadCount=e)}function D(t){for(var e,n=[],a=0;e=t.children[a];a+=1)"SOURCE"===e.tagName&&n.push(e);return n}function H(t,e){D(t).forEach(e)}function V(t){delete t[v]}function n(e,t){var n;M(e)||(n={},t.forEach(function(t){n[t]=e.getAttribute(t)}),e[v]=n)}function f(a,t){var o;M(a)&&(o=dt(a),t.forEach(function(t){var e,n;e=a,(n=o[t=t])?e.setAttribute(t,n):e.removeAttribute(t)}))}function F(t,e,n){w(t,e.class_applied),E(t,it),n&&(e.unobserve_completed&&L(t,e),k(e.callback_applied,t,n))}function B(t,e,n){w(t,e.class_loading),E(t,p),n&&(O(n,1),k(e.callback_loading,t,n))}function a(t,e,n){n&&t.setAttribute(e,n)}function J(t,e){a(t,b,c(t,e.data_sizes)),a(t,i,c(t,e.data_srcset)),a(t,g,c(t,e.data_src))}function P(t,e){!e||0<e.loadingCount||0<e.toLoadCount||k(t.callback_finish,e)}function S(t,e,n){t.addEventListener(e,n),t.llEvLisnrs[e]=n}function U(t,e,n){delete t.llTempImage,O(n,-1),n&&--n.toLoadCount,A(t,e.class_loading),e.unobserve_completed&&L(t,n)}function s(r,l,c){var t,e,s=d(r)||r;z(s)||(z(t=s)||(t.llEvLisnrs={}),e="VIDEO"===t.tagName?"loadeddata":"load",S(t,e,function(t){var e=0,n=r,a=l,o=c,i=u(n);U(n,a,o),w(n,a.class_loaded),E(n,ot),k(a.callback_loaded,n,o),i||P(a,o),T(s)}),S(t,"error",function(t){var e=0,n=r,a=l,o=c,i=u(n);U(n,a,o),w(n,a.class_error),E(n,m),k(a.callback_error,n,o),a.restore_on_error&&f(n,N),i||P(a,o),T(s)}))}function $(t){return t.use_native&&"loading"in HTMLImageElement.prototype}function q(t,s,u){t.forEach(function(t){return t.isIntersecting||0<t.intersectionRatio?(o=t.target,i=t,r=s,l=u,c=0<=ct.indexOf(h(o)),E(o,"entered"),w(o,r.class_entered),A(o,r.class_exited),r.unobserve_entered&&L(o,l),k(r.callback_enter,o,i,l),void(c||R(o,r,l))):(i=t.target,c=t,o=s,r=u,void(y(i)||(w(i,o.class_exited),l=i,t=c,n=r,(e=o).cancel_on_exit&&h(l)===p&&"IMG"===l.tagName&&(T(l),x(a=l,function(t){bt(t)}),bt(a),vt(l),A(l,e.class_loading),O(n,-1),I(l),k(e.callback_cancel,l,t,n)),k(o.callback_exit,i,c,r))));var e,n,a,o,i,r,l,c})}function K(t){return Array.prototype.slice.call(t)}function l(t){return t.container.querySelectorAll(t.elements_selector)}function Q(t){return h(t)===m}function W(t,e){return t=t||l(e),K(t).filter(y)}function o(t,e){var a,o,n,i,t=r(t);this._settings=t,this.loadingCount=0,n=t,i=this,Y&&!$(n)&&(i._observer=new IntersectionObserver(function(t){q(t,n,i)},{root:n.container===document?null:n.container,rootMargin:n.thresholds||n.threshold+"px"})),a=t,o=this,_&&(o._onlineHandler=function(){var e,t,n;t=o,n=l(e=a),K(n).filter(Q).forEach(function(t){A(t,e.class_error),I(t)}),t.update()},window.addEventListener("online",o._onlineHandler)),this.update(e)}var _="undefined"!=typeof window,X=_&&!("onscroll"in window)||"undefined"!=typeof navigator&&/(gle|ing|ro)bot|crawl|spider/i.test(navigator.userAgent),Y=_&&"IntersectionObserver"in window,Z=_&&"classList"in document.createElement("p"),tt=_&&1<window.devicePixelRatio,et={elements_selector:".lazy",container:X||_?document:null,threshold:300,thresholds:null,data_src:"src",data_srcset:"srcset",data_sizes:"sizes",data_bg:"bg",data_bg_hidpi:"bg-hidpi",data_bg_multi:"bg-multi",data_bg_multi_hidpi:"bg-multi-hidpi",data_bg_set:"bg-set",data_poster:"poster",class_applied:"applied",class_loading:"loading",class_loaded:"loaded",class_error:"error",class_entered:"entered",class_exited:"exited",unobserve_completed:!0,unobserve_entered:!1,cancel_on_exit:!0,callback_enter:null,callback_exit:null,callback_applied:null,callback_loading:null,callback_loaded:null,callback_error:null,callback_finish:null,callback_cancel:null,use_native:!1,restore_on_error:!1},g="src",i="srcset",b="sizes",nt="poster",v="llOriginalAttrs",at="data",p="loading",ot="loaded",it="applied",m="error",rt="native",lt="data-",h=function(t){return c(t,"ll-status")},E=function(t,e){var n;t=t,n="data-ll-status",null!==e?t.setAttribute(n,e):t.removeAttribute(n)},I=function(t){return E(t,null)},y=function(t){return null===h(t)},ct=[p,ot,it,m],k=function(t,e,n,a){t&&"function"==typeof t&&(void 0===a?void 0===n?t(e):t(e,n):t(e,n,a))},w=function(t,e){Z?t.classList.add(e):t.className+=(t.className?" ":"")+e},A=function(t,e){Z?t.classList.remove(e):t.className=t.className.replace(new RegExp("(^|\\s+)"+e+"(\\s+|$)")," ").replace(/^\s+/,"").replace(/\s+$/,"")},L=function(t,e){e&&(e=e._observer)&&e.unobserve(t)},O=function(t,e){t&&(t.loadingCount+=e)},x=function(t,e){t=t.parentNode;t&&"PICTURE"===t.tagName&&D(t).forEach(e)},C=[g],st=[g,nt],N=[g,i,b],ut=[at],M=function(t){return!!t[v]},dt=function(t){return t[v]},ft={IMG:function(t,e){x(t,function(t){n(t,N),J(t,e)}),n(t,N),J(t,e)},IFRAME:function(t,e){n(t,C),a(t,g,c(t,e.data_src))},VIDEO:function(t,e){H(t,function(t){n(t,C),a(t,g,c(t,e.data_src))}),n(t,st),a(t,nt,c(t,e.data_poster)),a(t,g,c(t,e.data_src)),t.load()},OBJECT:function(t,e){n(t,ut),a(t,at,c(t,e.data_src))}},_t=["IMG","IFRAME","VIDEO","OBJECT"],gt=function(t,e,n){t.removeEventListener(e,n)},z=function(t){return!!t.llEvLisnrs},T=function(t){if(z(t)){var e,n=t.llEvLisnrs;for(e in n){var a=n[e];gt(t,e,a)}delete t.llEvLisnrs}},R=function(t,e,n){var a,o,i,r,l;-1<_t.indexOf(t.tagName)?(s(i=t,a=e,l=n),a=a,l=l,(o=ft[(i=i).tagName])&&(o(i,a),B(i,a,l))):(o=e,i=n,(a=t).llTempImage=document.createElement("IMG"),s(a,o,i),M(l=a)||(l[v]={backgroundImage:l.style.backgroundImage}),l=i,t=c(e=a,(n=o).data_bg),r=c(e,n.data_bg_hidpi),(r=tt&&r?r:t)&&(e.style.backgroundImage='url("'.concat(r,'")'),d(e).setAttribute(g,r),B(e,n,l)),t=i,n=c(r=a,(e=o).data_bg_multi),l=c(r,e.data_bg_multi_hidpi),(l=tt&&l?l:n)&&(r.style.backgroundImage=l,F(r,e,t)),n=i,(e=c(l=a,(r=o).data_bg_set))&&(t=(e=e.split("|")).map(function(t){return"image-set(".concat(t,")")}),l.style.backgroundImage=t.join(),""===l.style.backgroundImage&&(t=e.map(function(t){return"-webkit-image-set(".concat(t,")")}),l.style.backgroundImage=t.join()),F(l,r,n)))},bt=function(t){t.removeAttribute(g),t.removeAttribute(i),t.removeAttribute(b)},vt=function(t){x(t,function(t){f(t,N)}),f(t,N)},pt={IMG:vt,IFRAME:function(t){f(t,C)},VIDEO:function(t){H(t,function(t){f(t,C)}),f(t,st),t.load()},OBJECT:function(t){f(t,ut)}},mt=["IMG","IFRAME","VIDEO"];if(o.prototype={update:function(t){var e,n,a,o,i=this._settings,t=W(t,i);j(this,t.length),!X&&Y?$(i)?(a=i,o=this,t.forEach(function(t){var e,n;-1!==mt.indexOf(t.tagName)&&(e=a,n=o,(t=t).setAttribute("loading","lazy"),s(t,e,n),(n=ft[t.tagName])&&n(t,e),E(t,rt))}),j(o,0)):(i=t,(e=this._observer).disconnect(),n=e,i.forEach(function(t){n.observe(t)})):this.loadAll(t)},destroy:function(){this._observer&&this._observer.disconnect(),_&&window.removeEventListener("online",this._onlineHandler),l(this._settings).forEach(function(t){V(t)}),delete this._observer,delete this._settings,delete this._onlineHandler,delete this.loadingCount,delete this.toLoadCount},loadAll:function(t){var e=this,n=this._settings;W(t,n).forEach(function(t){L(t,e),R(t,n,e)})},restoreAll:function(){var o=this._settings;l(o).forEach(function(t){var e,n,a;e=o,(a=pt[(n=t=t).tagName])?a(n):M(a=n)&&(n=dt(a),a.style.backgroundImage=n.backgroundImage),a=e,y(n=t)||u(n)||(A(n,a.class_entered),A(n,a.class_exited),A(n,a.class_applied),A(n,a.class_loading),A(n,a.class_loaded),A(n,a.class_error)),I(t),V(t)})}},o.load=function(t,e){e=r(e);R(t,e)},o.resetStatus=function(t){I(t)},_){var ht=o,G=window.lazyLoadOptions;if(G)if(G.length)for(var Et,It=0;Et=G[It];It+=1)t(ht,Et);else t(ht,G)}return o});